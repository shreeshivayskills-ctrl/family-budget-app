<!DOCTYPE html>
<html lang="hi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>рдкрд░рд┐рд╡рд╛рд░ рдмрдЬрдЯ рдкреНрд░рдмрдВрдзрдХ</title>

  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Icons -->
  <script src="https://unpkg.com/lucide@latest"></script>

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <style>
    body { font-family: system-ui, sans-serif; }
  </style>
</head>

<body class="bg-slate-100 min-h-screen">

<div class="max-w-5xl mx-auto p-4">

  <!-- Header -->
  <div class="bg-indigo-600 text-white rounded-2xl p-6 mb-6 shadow-lg">
    <h1 class="text-3xl font-bold">ЁЯСитАНЁЯСйтАНЁЯСзтАНЁЯСж рдкрд░рд┐рд╡рд╛рд░ рдмрдЬрдЯ рдкреНрд░рдмрдВрдзрдХ</h1>
    <p class="text-indigo-100">рдЖрдп, рд╡реНрдпрдп рдФрд░ рдмрдЪрдд рдХрд╛ рд╕рд░рд▓ рдкреНрд░рдмрдВрдзрди</p>
  </div>

  <!-- Summary -->
  <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
    <div class="bg-white p-4 rounded-xl shadow">
      <p class="text-sm text-gray-500">рдХреБрд▓ рдЖрдп</p>
      <h2 id="totalIncome" class="text-2xl font-bold text-green-600">тВ╣0</h2>
    </div>
    <div class="bg-white p-4 rounded-xl shadow">
      <p class="text-sm text-gray-500">рдХреБрд▓ рд╡реНрдпрдп</p>
      <h2 id="totalExpense" class="text-2xl font-bold text-red-600">тВ╣0</h2>
    </div>
    <div class="bg-white p-4 rounded-xl shadow">
      <p class="text-sm text-gray-500">рд╢реЗрд╖ рд░рд╛рд╢рд┐</p>
      <h2 id="balance" class="text-2xl font-bold text-blue-600">тВ╣0</h2>
    </div>
  </div>

  <!-- Form -->
  <div class="bg-white p-6 rounded-xl shadow mb-6">
    <h2 class="font-bold mb-4">тЮХ рдирдпрд╛ рд▓реЗрдирджреЗрди</h2>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <select id="type" class="p-2 border rounded">
        <option value="income">рдЖрдп</option>
        <option value="expense">рд╡реНрдпрдп</option>
      </select>

      <select id="category" class="p-2 border rounded"></select>

      <input id="amount" type="number" placeholder="рд░рд╛рд╢рд┐ (тВ╣)" class="p-2 border rounded">
      <input id="desc" type="text" placeholder="рд╡рд┐рд╡рд░рдг" class="p-2 border rounded">
    </div>

    <button onclick="addTransaction()"
      class="mt-4 w-full bg-indigo-600 text-white py-3 rounded-lg font-bold">
      рдЬреЛрдбрд╝реЗрдВ
    </button>
  </div>

  <!-- Chart -->
  <div class="bg-white p-6 rounded-xl shadow mb-6">
    <h2 class="font-bold mb-3">ЁЯУК рд╡реНрдпрдп рд╡рд┐рд╢реНрд▓реЗрд╖рдг</h2>
    <canvas id="chart"></canvas>
  </div>

  <!-- Transactions -->
  <div class="bg-white rounded-xl shadow">
    <div class="p-4 border-b font-bold">рд▓реЗрдирджреЗрди рдЗрддрд┐рд╣рд╛рд╕</div>
    <div id="list" class="divide-y"></div>
  </div>

</div>

<script>
  const categories = {
    income: ['рд╡реЗрддрди','рд╡реНрдпрд╛рдкрд╛рд░','рдЙрдкрд╣рд╛рд░','рдЕрдиреНрдп рдЖрдп'],
    expense: ['рдХрд┐рд░рд╛рдирд╛','рдХрд┐рд░рд╛рдпрд╛','рдмрд┐рдЬрд▓реА','рд╢рд┐рдХреНрд╖рд╛','рд╕реНрд╡рд╛рд╕реНрдереНрдп','рдЕрдиреНрдп рдЦрд░реНрдЪ']
  };

  let transactions = JSON.parse(localStorage.getItem('budget')) || [];
  let chart;

  function updateCategory() {
    const type = document.getElementById('type').value;
    const cat = document.getElementById('category');
    cat.innerHTML = categories[type].map(c => `<option>${c}</option>`).join('');
  }

  document.getElementById('type').onchange = updateCategory;
  updateCategory();

  function addTransaction() {
    const t = {
      id: Date.now(),
      type: type.value,
      category: category.value,
      amount: +amount.value,
      desc: desc.value
    };
    if (!t.amount || !t.desc) return alert('рдЬрд╛рдирдХрд╛рд░реА рднрд░реЗрдВ');
    transactions.unshift(t);
    localStorage.setItem('budget', JSON.stringify(transactions));
    amount.value = desc.value = '';
    render();
  }

  function render() {
    let inc=0, exp=0, map={};
    list.innerHTML = '';
    transactions.forEach(t=>{
      if(t.type==='income') inc+=t.amount;
      else {
        exp+=t.amount;
        map[t.category]=(map[t.category]||0)+t.amount;
      }
      list.innerHTML+=`
        <div class="p-3 flex justify-between">
          <span>${t.desc} (${t.category})</span>
          <b class="${t.type==='income'?'text-green-600':'text-red-600'}">
            тВ╣${t.amount}
          </b>
        </div>`;
    });

    totalIncome.textContent = 'тВ╣'+inc;
    totalExpense.textContent = 'тВ╣'+exp;
    balance.textContent = 'тВ╣'+(inc-exp);

    if(chart) chart.destroy();
    chart = new Chart(document.getElementById('chart'),{
      type:'doughnut',
      data:{labels:Object.keys(map),datasets:[{data:Object.values(map)}]}
    });
  }

  render();
</script>

</body>
</html>
